<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VeriHealth AI Chat (Futuristic)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'background-dark': '#0a0f1c',
              'neon-green': '#00ffb3',
              'neon-blue': '#1e90ff',
              'guider-bubble': '#1a2738',
            },
            fontFamily: {
              sans: ['Orbitron', 'Inter', 'sans-serif'],
              chat: ['Poppins', 'Inter', 'sans-serif'],
            },
          },
        },
      };
    </script>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

      @keyframes pulseGlow {
        0%, 100% { box-shadow: 0 0 10px #00ffb3, 0 0 20px #00ffb3, 0 0 30px #00ffb3; }
        50% { box-shadow: 0 0 20px #1e90ff, 0 0 30px #1e90ff, 0 0 40px #1e90ff; }
      }

      .neon-border {
        border: 1px solid rgba(0, 255, 179, 0.3);
        backdrop-filter: blur(8px);
      }

      .menu-item {
        position: absolute;
        opacity: 0;
        transform: scale(0);
        transition: all 0.3s ease;
      }

      .menu-open .menu-item {
        opacity: 1;
        transform: scale(1);
      }

      .menu-item:nth-child(1) { top: -80px; left: 0; transition-delay: 0.05s; }
      .menu-item:nth-child(2) { top: -50px; left: 70px; transition-delay: 0.1s; }
      .menu-item:nth-child(3) { top: 0; left: 100px; transition-delay: 0.15s; }

      .menu-btn {
        animation: pulseGlow 3s infinite alternate;
      }

      #global-loader {
        position: fixed;
        inset: 0;
        background: radial-gradient(circle at center, #0a0f1c 60%, #000 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
      }

      .spinner {
        border: 5px solid rgba(255, 255, 255, 0.1);
        border-top: 5px solid #00ffb3;
        border-radius: 50%;
        width: 60px;
        height: 60px;
      }

      #chat-container {
        opacity: 0;
        transform: scale(0.8);
        pointer-events: none;
      }
      
      #main-content.visible #chat-container {
        pointer-events: auto;
      }

      #splash-card {
        opacity: 0;
        transform: scale(0.9) rotateX(20deg);
      }

      #chat-header {
        opacity: 0;
        transform: translateX(-50px);
      }

      #header-logo {
        opacity: 0;
      }

      #chat-input {
        opacity: 0;
        transform: translateY(10px);
      }

      #send-btn, #menu-btn {
        opacity: 0;
        transform: scale(0);
        pointer-events: auto;
      }
    </style>
  </head>

  <body class="bg-background-dark text-white font-sans min-h-screen p-4">
    <!-- Loader -->
    <div id="global-loader">
      <div class="flex flex-col items-center space-y-4" id="loader-content">
        <img src="logo.png" class="w-16 h-16" alt="logo" id="loader-logo" />
        <div class="spinner" id="loader-spinner"></div>
        <p class="text-neon-green text-sm tracking-widest" id="loader-text">Initializing VeriHealth AI...</p>
      </div>
    </div>

    <!-- Splash Screen -->
    <div id="splash-screen" class="hidden fixed inset-0 flex items-center justify-center bg-black/80 backdrop-blur-lg z-50">
      <div class="text-center border border-neon-green/40 p-10 rounded-2xl neon-border" id="splash-card">
        <img src="logo.png" alt="Logo" class="w-20 mx-auto mb-4" id="splash-logo" />
        <h1 class="text-5xl font-extrabold" id="splash-title">
          <span class="text-neon-green">Veri</span><span class="text-white">Health</span>
        </h1>
        <p class="text-lg text-neon-blue mt-3 mb-6 italic" id="splash-subtitle">Your autonomous AI guide against health misinformation.</p>
        <button
          id="get-started-btn"
          class="px-8 py-3 rounded-full bg-neon-green text-black font-bold shadow-lg hover:bg-neon-blue hover:text-white transition transform hover:scale-105">
          Engage System
        </button>
      </div>
    </div>

    <!-- Main Chat -->
    <main id="main-content" class="hidden">
      <div id="chat-container"
        class="max-w-3xl mx-auto rounded-2xl neon-border overflow-hidden shadow-[0_0_40px_rgba(0,255,179,0.2)]">
        <!-- Header -->
        <header class="p-4 bg-black/60 border-b border-neon-green/30 flex justify-between items-center" id="chat-header">
          <div class="flex items-center gap-3" id="header-left">
            <img src="logo.png" class="w-8 h-8 rounded-full" id="header-logo" />
            <div id="header-text">
              <h2 class="text-lg font-bold" id="header-title">VeriHealth AI</h2>
              <p class="text-xs text-neon-blue" id="header-status">Online ‚Äî analyzing reality</p>
            </div>
          </div>
          <p id="user-id-display" class="text-xs text-gray-400">UID: #A1Z-567</p>
        </header>

        <!-- Messages -->
        <div id="messages-area" class="flex flex-col p-4 h-[70vh] overflow-y-auto space-y-2 font-chat"></div>

        <!-- Typing Indicator -->
        <div id="typing-indicator" class="p-4 bg-black/40 border-t border-neon-green/30 hidden opacity-0">
          <div class="flex items-center space-x-2">
            <span class="text-neon-green text-sm" id="typing-text">Analyzing...</span>
            <div class="flex space-x-1">
              <span class="w-2 h-2 bg-neon-green rounded-full" id="typing-dot-1"></span>
              <span class="w-2 h-2 bg-neon-green rounded-full" id="typing-dot-2"></span>
              <span class="w-2 h-2 bg-neon-green rounded-full" id="typing-dot-3"></span>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <footer class="p-4 bg-black/60 border-t border-neon-green/30 flex items-center space-x-2 relative" id="chat-footer">
          <div id="menu-container" class="relative w-12 h-12 flex items-center justify-center">
            <button id="menu-btn"
              class="menu-btn w-12 h-12 rounded-full bg-neon-green text-black font-bold text-2xl flex items-center justify-center transition hover:scale-110">
              +
            </button>

            <div id="radial-menu" class="absolute">
              <button class="menu-item w-12 h-12 bg-guider-bubble rounded-full flex items-center justify-center hover:bg-neon-green hover:text-black transition" title="Upload Image">üñºÔ∏è</button>
              <button class="menu-item w-12 h-12 bg-guider-bubble rounded-full flex items-center justify-center hover:bg-neon-green hover:text-black transition" title="Video/Reel">üé•</button>
              <button class="menu-item w-12 h-12 bg-guider-bubble rounded-full flex items-center justify-center hover:bg-neon-green hover:text-black transition" title="Add URL">üåê</button>
            </div>
          </div>

          <form id="chat-form" class="flex-grow flex items-center space-x-2">
            <input id="chat-input" placeholder="Transmit your query..." type="text"
              class="flex-grow p-3 rounded-full bg-guider-bubble border border-neon-green/40 text-white focus:outline-none focus:ring-1 focus:ring-neon-green placeholder-gray-400" />
            <button type="submit" id="send-btn"
              class="p-3 rounded-full bg-neon-green text-black hover:bg-neon-blue hover:text-white transition transform hover:scale-105">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="22" x2="11" y1="2" y2="13" />
                <polygon points="22 2 15 22 11 13 2 9 22 2" />
              </svg>
            </button>
          </form>
        </footer>
      </div>
    </main>

    <script>
      const mockResponses = {
        "lemon water kills cancer": {
          confidenceLevel: 95,
          summary: "**Claim Assessment: FALSE**\n\nThere is 95% confidence that this claim is **completely false**. While lemons contain compounds with potential health benefits, consuming lemon water cannot kill cancer cells. Cancer requires evidence-based medical treatment such as chemotherapy, radiation, surgery, or immunotherapy. Relying on lemon water instead of proven treatments is extremely dangerous and could delay life-saving medical interventions.\n\n**Why This Claim Persists:**\nMisinterpretations of laboratory studies showing anti-cancer properties of isolated citrus compounds have been wildly exaggerated on social media. In vitro studies (petri dish experiments) do not translate to human efficacy.\n\n**Established Cancer Treatment:**\nOncologists rely on FDA-approved therapies with rigorous clinical trial data. Always consult qualified oncologists for evidence-based cancer care.",
          citationSources: [
            { title: "WHO Cancer Fact Sheet", uri: "https://www.who.int/cancer" },
            { title: "American Cancer Society on Diet and Cancer", uri: "https://www.cancer.org/diet-and-activity/diet.html" },
            { title: "NIH - Cancer Treatment Options", uri: "https://www.cancer.gov/types/common-cancers/list-cancer-types" }
          ]
        },
        "vaccines contain microchips": {
          confidenceLevel: 98,
          summary: "**Claim Assessment: FALSE**\n\n98% confidence: This is a debunked conspiracy theory. Vaccines do not contain microchips, 5G networks, or tracking devices. Microchips small enough to inject would be visible under a microscope and would require power sources (batteries) to function, making them impractical. Billions of vaccinated people worldwide have undergone medical imaging (CT scans, MRIs) that would easily detect metal objects.\n\n**Technical Reality:**\nVaccines contain: viral or bacterial antigens, lipid nanoparticles, stabilizers, and preservatives. All ingredients are listed on regulatory documents reviewed by health authorities like the FDA and EMA.\n\n**Verification:**\nThousands of independent researchers and journalists have examined vaccine contents without finding any evidence of tracking technology.",
          citationSources: [
            { title: "FDA - How COVID-19 Vaccines Work", uri: "https://www.fda.gov/consumers/consumer-updates/how-covid-19-vaccines-work" },
            { title: "CDC - Vaccine Ingredients", uri: "https://www.cdc.gov/coronavirus/2019-ncov/vaccines/different-vaccines/mRNA.html" },
            { title: "WHO - Vaccine Safety Information", uri: "https://www.who.int/teams/immunization-vaccines-and-biologicals/diseases-and-vaccines/covid-19/covid-19-vaccines/vaccine-safety-surveillance" }
          ]
        },
        "drinking water at night causes kidney disease": {
          confidenceLevel: 88,
          summary: "**Claim Assessment: FALSE**\n\nWith 88% confidence, this claim is false. Drinking water at night does not cause kidney disease. Kidneys are designed to filter water 24/7, and drinking adequate fluids is essential for kidney health. The idea that nighttime water consumption damages kidneys contradicts basic renal physiology.\n\n**Kidney Disease Causes:**\nActual risk factors include: diabetes, hypertension, chronic glomerulonephritis, and autoimmune disorders‚ÄîNOT the timing of water intake.\n\n**Healthy Hydration:**\nMost adults need 8-10 glasses of water daily. Excessive fluid intake can cause hyponatremia (dangerously low sodium), but this applies regardless of time of day.\n\n**Medical Consensus:**\nNephrologists and urologists universally reject this claim.",
          citationSources: [
            { title: "National Kidney Foundation - Healthy Kidneys", uri: "https://www.kidney.org/" },
            { title: "Mayo Clinic - Kidney Health", uri: "https://www.mayoclinic.org/diseases-conditions/kidney-disease/symptoms-causes/syc-20354521" }
          ]
        },
        "essential oils cure diabetes": {
          confidenceLevel: 92,
          summary: "**Claim Assessment: FALSE**\n\nWith 92% confidence, this claim is false. Essential oils cannot cure diabetes. While some oils may have minor anti-inflammatory properties, they cannot replace insulin therapy or oral diabetes medications that have been clinically proven effective.\n\n**What Works for Diabetes:**\nEvidence-based treatments include: insulin, metformin, GLP-1 agonists, lifestyle modifications (diet, exercise), and regular monitoring. These are validated through rigorous clinical trials.\n\n**Danger:**\nReplacing medical treatment with essential oils leads to dangerously high blood sugar levels, risking diabetic ketoacidosis, neuropathy, and organ damage.\n\n**Alternative Therapies:**\nWhile certain essential oils may support wellness as a complement to medical treatment, they are not substitutes.",
          citationSources: [
            { title: "ADA - Diabetes Management", uri: "https://www.diabetes.org/" },
            { title: "Mayo Clinic - Diabetes Treatment", uri: "https://www.mayoclinic.org/diseases-conditions/type-2-diabetes/diagnosis-treatment/drc-20351199" }
          ]
        },
        "detox diets remove toxins from your body": {
          confidenceLevel: 85,
          summary: "**Claim Assessment: MISLEADING**\n\nWith 85% confidence: This claim is overstated. While detox diets may provide psychological benefit and improved short-term energy, your liver and kidneys already perform continuous detoxification‚Äîno special diet required.\n\n**What Actually Detoxifies:**\nYour liver and kidneys filter waste continuously. Drinking water, eating fruits/vegetables, and maintaining regular sleep naturally support these organs.\n\n**Detox Diet Issues:**\nMany commercial detoxes lack scientific evidence, contain expensive supplements, and may cause nutrient deficiencies or electrolyte imbalances.\n\n**Balanced Approach:**\nFocus on whole foods, hydration, and regular exercise for optimal health rather than expensive detox products.",
          citationSources: [
            { title: "Harvard Medical School - Detox Diets", uri: "https://www.health.harvard.edu/wellness/the-dubious-practice-of-detox" },
            { title: "NIH - Liver and Kidney Function", uri: "https://www.niddk.nih.gov/" }
          ]
        }
      };

      let messages = [];
      let chatInput, messagesArea, chatForm, menuBtn, radialMenu, typingIndicator, sendBtn;

      const initializeApp = () => {
        const initialMessage = {
          text: "**VeriHealth AI Initialized**\n\nI verify health claims using peer-reviewed research and authoritative sources. Try asking me about common health myths like 'lemon water kills cancer' or 'vaccines contain microchips'.",
          sender: 'guider',
          timestamp: new Date(),
          structuredData: null
        };
        messages.push(initialMessage);
        renderMessages();
      };

      const createMessageElement = (msg) => {
        const div = document.createElement('div');
        const isUser = msg.sender === 'user';
        const timestamp = msg.timestamp ? new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : 'Now';

        div.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;
        div.style.opacity = '0';

        const bubble = document.createElement('div');
        bubble.className = `max-w-xs p-4 rounded-lg ${isUser ? 'bg-neon-green text-black' : 'bg-guider-bubble text-white'}`;

        if (msg.structuredData) {
          const data = msg.structuredData;
          const conf = data.confidenceLevel;
          const confColor = conf >= 90 ? '#00ffb3' : conf >= 50 ? '#ffff00' : '#ff4444';
          const confText = conf >= 90 ? 'HIGH' : conf >= 50 ? 'MODERATE' : 'LOW';

          let html = `<div style="margin-bottom: 0.75rem; font-weight: bold; color: ${confColor}; opacity: 0;">
            Confidence: ${conf}% [${confText}]
          </div>`;

          html += `<div style="margin-bottom: 0.75rem; background: rgba(0,0,0,0.2); padding: 0.5rem; border-radius: 0.25rem;">
            <div style="height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden;">
              <div style="height: 100%; width: 0%; background: ${confColor}; transition: width 0.8s ease;"></div>
            </div>
          </div>`;

          const summaryHtml = data.summary
            .replace(/\n\n/g, '<br><br>')
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\n/g, '<br>');
          
          html += `<div style="font-size: 0.9rem; line-height: 1.4; margin-bottom: 0.75rem; opacity: 0;">${summaryHtml}</div>`;

          if (data.citationSources && data.citationSources.length > 0) {
            html += `<div style="border-top: 1px solid rgba(0,255,179,0.3); padding-top: 0.5rem; margin-top: 0.5rem; opacity: 0;">
              <div style="font-size: 0.75rem; color: ${isUser ? '#000' : '#aaa'}; font-weight: bold;">Sources:</div>`;
            data.citationSources.forEach((src, i) => {
              const url = src.uri && src.uri.startsWith('http') ? src.uri : '#';
              html += `<div style="font-size: 0.75rem; margin-top: 0.25rem;"><a href="${url}" target="_blank" style="color: ${isUser ? '#000' : '#00ffb3'};">${i + 1}. ${src.title}</a></div>`;
            });
            html += `</div>`;
          }

          bubble.innerHTML = html;
        } else {
          const textHtml = msg.text
            .replace(/\n\n/g, '<br><br>')
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\n/g, '<br>');
          bubble.innerHTML = `<div style="font-size: 0.95rem; line-height: 1.4; opacity: 0;">${textHtml}</div>`;
        }

        const timeSpan = document.createElement('div');
        timeSpan.style.fontSize = '0.7rem';
        timeSpan.style.marginTop = '0.35rem';
        timeSpan.style.opacity = '0';
        timeSpan.textContent = timestamp;
        bubble.appendChild(timeSpan);

        div.appendChild(bubble);
        return div;
      };

      const renderMessages = () => {
        if (!messagesArea) return;
        messagesArea.innerHTML = '';
        const newMessages = messages.map(msg => createMessageElement(msg));
        newMessages.forEach((msgEl, idx) => {
          messagesArea.appendChild(msgEl);
          const isUser = msgEl.classList.contains('justify-end');
          
          gsap.to(msgEl, {
            opacity: 1,
            duration: 0.5,
            delay: idx * 0.1,
            ease: "power2.out"
          });

          gsap.fromTo(msgEl, 
            { 
              x: isUser ? 100 : -100,
              rotationY: isUser ? -15 : 15
            },
            {
              x: 0,
              rotationY: 0,
              duration: 0.7,
              delay: idx * 0.1,
              ease: "back.out"
            }
          );

          const bubble = msgEl.querySelector('div:last-child');
          gsap.fromTo(bubble,
            { scale: 0.8, filter: 'blur(5px)' },
            {
              scale: 1,
              filter: 'blur(0px)',
              duration: 0.6,
              delay: idx * 0.1 + 0.1,
              ease: "back.out"
            }
          );

          const allDivs = bubble.querySelectorAll('div');
          allDivs.forEach((div, divIdx) => {
            gsap.fromTo(div,
              { opacity: 0, y: 10 },
              {
                opacity: div.style.opacity ? parseFloat(div.style.opacity) : 1,
                y: 0,
                duration: 0.5,
                delay: idx * 0.1 + 0.2 + divIdx * 0.08,
                ease: "power2.out"
              }
            );
          });

          const progressBar = bubble.querySelector('div div div');
          if (progressBar && progressBar.style.background) {
            gsap.to(progressBar,
              {
                width: "100%",
                duration: 1.2,
                delay: idx * 0.1 + 0.35,
                ease: "power1.inOut"
              }
            );
          }

          const timeSpan = msgEl.querySelector('div:last-child > div:last-child');
          if (timeSpan) {
            gsap.fromTo(timeSpan,
              { opacity: 0 },
              {
                opacity: 0.7,
                duration: 0.4,
                delay: idx * 0.1 + 0.4,
                ease: "power2.out"
              }
            );
          }
        });
        messagesArea.scrollTop = messagesArea.scrollHeight;
      };

      const findMockResponse = (text) => {
        const lower = text.toLowerCase();
        for (const [key, response] of Object.entries(mockResponses)) {
          if (lower.includes(key)) return response;
        }
        return null;
      };

      const handleSendMessage = async (e) => {
        e.preventDefault();
        const text = chatInput.value.trim();
        if (!text) return;

        gsap.to(chatInput, { opacity: 0.5, duration: 0.2 });
        gsap.fromTo(sendBtn, 
          { scale: 1 }, 
          { scale: 1.2, duration: 0.1, yoyo: true, repeat: 1 }
        );

        messages.push({ text, sender: 'user', timestamp: new Date() });
        chatInput.value = '';
        renderMessages();

        typingIndicator.classList.remove('hidden');
        gsap.to('#typing-indicator', {
          opacity: 1,
          duration: 0.4,
          ease: "power2.out"
        });

        gsap.fromTo('#typing-dot-1, #typing-dot-2, #typing-dot-3',
          { y: 0, scale: 1 },
          { 
            y: -6, 
            scale: 1.2,
            duration: 0.5, 
            repeat: -1, 
            yoyo: true,
            stagger: 0.12,
            ease: "sine.inOut"
          }
        );

        gsap.to('#typing-text', {
          opacity: 0.6,
          duration: 0.8,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut"
        });

        await new Promise(resolve => setTimeout(resolve, 1200));

        const mockData = findMockResponse(text);
        if (mockData) {
          messages.push({
            text: `Analysis: "${text.substring(0, 50)}..."`,
            sender: 'guider',
            timestamp: new Date(),
            structuredData: mockData
          });
        } else {
          messages.push({
            text: "I don't have a specific analysis for that claim yet. Try testing with: 'lemon water kills cancer', 'vaccines contain microchips', 'drinking water at night causes kidney disease', 'essential oils cure diabetes', or 'detox diets remove toxins'.",
            sender: 'guider',
            timestamp: new Date()
          });
        }

        gsap.to('#typing-indicator', {
          opacity: 0,
          duration: 0.4,
          ease: "power2.out",
          onComplete: () => {
            typingIndicator.classList.add('hidden');
            gsap.killTweensOf('#typing-dot-1, #typing-dot-2, #typing-dot-3, #typing-text');
          }
        });

        gsap.to(chatInput, { opacity: 1, duration: 0.2, delay: 0.2 });
        
        renderMessages();
      };

      const createLoaderTimeline = () => {
        const tl = gsap.timeline();
        
        tl.to('#loader-logo', {
          rotation: 720,
          duration: 3,
          ease: "power1.inOut"
        }, 0)
        .to('#loader-logo', {
          scale: 1.15,
          filter: 'drop-shadow(0 0 25px #00ffb3)',
          duration: 1,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut"
        }, 0)
        .to('#loader-spinner', {
          rotation: -720,
          duration: 3,
          ease: "power1.inOut"
        }, 0)
        .to('#loader-spinner', {
          filter: 'drop-shadow(0 0 15px #1e90ff)',
          duration: 1.2,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut"
        }, 0)
        .to('#loader-text', {
          opacity: 0.4,
          textShadow: '0 0 15px #00ffb3',
          duration: 0.9,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut"
        }, 0);

        return tl;
      };

      const createSplashTimeline = () => {
        const tl = gsap.timeline();
        
        tl.fromTo('#splash-card', 
          { 
            scale: 0.8, 
            rotationX: 25,
            opacity: 0,
            y: 30
          },
          {
            scale: 1,
            rotationY: 0,
            opacity: 1,
            y: 0,
            duration: 1,
            ease: "back.out"
          }
        )
        .fromTo('#splash-logo',
          { scale: 0, rotation: -180, opacity: 0 },
          {
            scale: 1,
            rotation: 0,
            opacity: 1,
            duration: 0.8,
            ease: "back.out"
          },
          0.2
        )
        .fromTo('#splash-title',
          { x: -50, opacity: 0 },
          {
            x: 0,
            opacity: 1,
            duration: 0.6,
            ease: "power2.out"
          },
          0.35
        )
        .fromTo('#splash-subtitle',
          { x: 50, opacity: 0 },
          {
            x: 0,
            opacity: 1,
            duration: 0.6,
            ease: "power2.out"
          },
          0.45
        )
        .fromTo('#get-started-btn',
          { scale: 0, opacity: 0, filter: 'blur(10px)' },
          {
            scale: 1,
            opacity: 1,
            filter: 'blur(0px)',
            duration: 0.7,
            ease: "back.out"
          },
          0.55
        );

        return tl;
      };

      const createMainContentTimeline = () => {
        const tl = gsap.timeline();
        
        tl.fromTo('#chat-container', 
          { 
            scale: 0.7, 
            opacity: 0,
            rotationY: 20
          },
          {
            scale: 1,
            opacity: 1,
            rotationY: 0,
            duration: 0.9,
            ease: "back.out"
          }, 
          0
        )
        .fromTo('#chat-header',
          { x: -60, opacity: 0 },
          {
            x: 0,
            opacity: 1,
            duration: 0.7,
            ease: "power2.out"
          },
          0.15
        )
        .fromTo('#header-logo',
          { scale: 0, rotation: -360, opacity: 0 },
          {
            scale: 1,
            rotation: 0,
            opacity: 1,
            duration: 0.8,
            ease: "back.out"
          },
          0.25
        )
        .fromTo('#header-title',
          { opacity: 0, y: 10 },
          {
            opacity: 1,
            y: 0,
            duration: 0.5,
            ease: "power2.out"
          },
          0.35
        )
        .fromTo('#header-status',
          { opacity: 0, filter: 'blur(5px)' },
          {
            opacity: 1,
            filter: 'blur(0px)',
            textShadow: '0 0 10px #00ffb3',
            duration: 0.6,
            ease: "power2.out"
          },
          0.42
        )
        .fromTo('#user-id-display',
          { opacity: 0, x: 20 },
          {
            opacity: 1,
            x: 0,
            duration: 0.5,
            ease: "power2.out"
          },
          0.35
        )
        .fromTo('#chat-input',
          { y: 15, opacity: 0, scale: 0.95 },
          {
            y: 0,
            opacity: 1,
            scale: 1,
            duration: 0.7,
            ease: "back.out"
          },
          0.5
        )
        .fromTo('#send-btn',
          { scale: 0, opacity: 0, rotation: 180 },
          {
            scale: 1,
            opacity: 1,
            rotation: 0,
            duration: 0.6,
            ease: "back.out"
          },
          0.6
        )
        .fromTo('#menu-btn',
          { scale: 0, opacity: 0, rotation: -180 },
          {
            scale: 1,
            opacity: 1,
            rotation: 0,
            duration: 0.6,
            ease: "back.out"
          },
          0.6
        );

        return tl;
      };

      window.addEventListener('load', () => {
        const loader = document.getElementById('global-loader');
        const loaderTl = createLoaderTimeline();
        
        setTimeout(() => {
          gsap.to('#global-loader', {
            opacity: 0,
            duration: 0.8,
            ease: "power1.out",
            onComplete: () => {
              loader.classList.add('hidden');
              const splash = document.getElementById('splash-screen');
              splash.classList.remove('hidden');
              createSplashTimeline().play();
            }
          });
        }, 2000);
      });

      document.getElementById('get-started-btn').addEventListener('click', () => {
        const splash = document.getElementById('splash-screen');
        const mainContent = document.getElementById('main-content');
        
        gsap.timeline()
          .to('#splash-card', {
            scale: 0.7,
            opacity: 0,
            rotationX: -25,
            duration: 0.8,
            ease: "back.in"
          }, 0)
          .to('#splash-logo', {
            scale: 0,
            rotation: 180,
            opacity: 0,
            duration: 0.6,
            ease: "power2.in"
          }, 0)
          .to('#splash-title', {
            x: -50,
            opacity: 0,
            duration: 0.5,
            ease: "power2.in"
          }, 0.1)
          .to('#splash-subtitle', {
            x: 50,
            opacity: 0,
            duration: 0.5,
            ease: "power2.in"
          }, 0.15)
          .to('#get-started-btn', {
            scale: 0,
            opacity: 0,
            filter: 'blur(10px)',
            duration: 0.6,
            ease: "power2.in"
          }, 0.2)
          .call(() => {
            splash.classList.add('hidden');
            mainContent.classList.remove('hidden');
            mainContent.classList.add('visible');
            
            chatInput = document.getElementById('chat-input');
            messagesArea = document.getElementById('messages-area');
            chatForm = document.getElementById('chat-form');
            menuBtn = document.getElementById('menu-btn');
            radialMenu = document.getElementById('radial-menu');
            typingIndicator = document.getElementById('typing-indicator');
            sendBtn = document.getElementById('send-btn');

            createMainContentTimeline().play();
            
            setTimeout(() => {
              chatForm.addEventListener('submit', handleSendMessage);
              menuBtn.addEventListener('click', () => {
              radialMenu.classList.toggle('menu-open');
              menuBtn.textContent = radialMenu.classList.contains('menu-open') ? '√ó' : '+';
              
              const items = radialMenu.querySelectorAll('.menu-item');
              if (radialMenu.classList.contains('menu-open')) {
                items.forEach((item, idx) => {
                  gsap.fromTo(item,
                    { scale: 0, opacity: 0, rotation: -180 },
                    {
                      scale: 1,
                      opacity: 1,
                      rotation: 0,
                      duration: 0.4,
                      delay: idx * 0.08,
                      ease: "back.out"
                    }
                  );
                });
              } else {
                items.forEach((item, idx) => {
                  gsap.to(item, {
                    scale: 0,
                    opacity: 0,
                    rotation: 180,
                    duration: 0.3,
                    delay: idx * 0.05,
                    ease: "power2.in"
                  });
                });
              }
            });

            initializeApp();
          });
      });

      gsap.set('body', { perspective: 1000 });
    </script>
